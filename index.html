<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>eBird Rarity Mapper</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700;800&family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app appFull">
      <header class="topbar">
        <div class="topbarTitle">
          <div class="appTitle">eBird Rarity Mapper</div>
        </div>
      </header>
      <div class="appBody">
        <aside class="panel" aria-label="Information panel">
          <div class="panel-content">
            <div class="info-block controls-block">
              <div class="controls controls-compact">
                <div class="select-row">
                  <div class="control-group">
                    <label for="regionSelect">Region Code</label>
                    <select id="regionSelect"></select>
                  </div>
                  <div class="control-group">
                    <label for="speciesSelect">Species</label>
                    <select id="speciesSelect"></select>
                  </div>
                </div>
                <div class="slider-row">
                  <div class="control-group">
                    <label for="daysBack">Days Back</label>
                    <div class="range-row">
                      <input id="daysBack" type="range" min="1" max="30" value="7" />
                      <span id="daysBackValue">7</span>
                    </div>
                  </div>
                </div>
                <div class="control-actions">
                  <button id="refreshBtn" type="button">Refresh Map</button>
                  <button id="clearBtn" type="button">Clear Filters</button>
                </div>
                <p id="status" class="status">Ready.</p>
                <div class="stats">
                  <div class="stat">
                    <span class="stat-label">Unique species + location</span>
                    <span id="uniqueCount" class="stat-value">0</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="info-block table-block">
              <div class="table-header">
                <h2>Lower 48 Rarities</h2>
                <div class="table-filters" aria-label="ABA table filters">
                  <div class="table-slider">
                    <label for="abaCodeMin">ABA code â‰¥</label>
                    <input id="abaCodeMin" type="range" min="3" max="6" value="3" />
                    <span id="abaCodeValue">3</span>
                  </div>
                  <label class="table-toggle">
                    Show on map <input id="showAbaMap" type="checkbox" checked />
                  </label>
                </div>
              </div>
              <div class="table-wrap">
                <table class="sightings-table">
                  <thead>
                    <tr>
                      <th class="col-species">Species</th>
                      <th class="col-state">State</th>
                      <th class="col-county">County</th>
                      <th class="col-date">Last</th>
                      <th class="col-date">First</th>
                      <th class="col-reports">Reports</th>
                      <th class="col-checkbox"><input type="checkbox" id="selectAllAba" checked title="Select/deselect all" /></th>
                    </tr>
                  </thead>
                  <tbody id="abaSightingsBody"></tbody>
                </table>
              </div>
              <div style="padding: 8px 0; text-align: right;">
                <button id="googleMapAba" type="button" class="google-map-btn" title="Download KML file to import into Google My Maps">ðŸ“¥ Export to Google Maps</button>
              </div>
            </div>
            <div class="info-block table-block">
              <div class="table-header">
                <h2>Notable â€” <span id="selectedRegionTitle">Selected Region</span></h2>
                <div class="table-filters" aria-label="County table filters">
                  <div class="table-slider">
                    <label for="countyCodeMin">ABA code â‰¥</label>
                    <input id="countyCodeMin" type="range" min="1" max="6" value="1" />
                    <span id="countyCodeValue">1</span>
                  </div>
                  <label class="table-toggle">
                    Show on map <input id="showCountyMap" type="checkbox" checked />
                  </label>
                </div>
              </div>
              <div class="table-wrap">
                <table class="sightings-table">
                  <thead>
                    <tr>
                      <th class="col-species">Species</th>
                      <th class="col-state">State</th>
                      <th class="col-county">County</th>
                      <th class="col-status">Status</th>
                      <th class="col-date">Last</th>
                      <th class="col-date">First</th>
                      <th class="col-reports">Reports</th>
                      <th class="col-checkbox"><input type="checkbox" id="selectAllNotable" checked title="Select/deselect all" /></th>
                    </tr>
                  </thead>
                  <tbody id="sightingsBody"></tbody>
                </table>
              </div>
              <div style="padding: 8px 0; text-align: right;">
                <button id="googleMapNotable" type="button" class="google-map-btn" title="Download KML file to import into Google My Maps">ðŸ“¥ Export to Google Maps</button>
              </div>
            </div>
          </div>
          <div class="panel-footer">
            <a
              class="sponsorButton"
              href="https://buymeacoffee.com/bartg"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Support this project"
            >
              <img
                class="bmcButton"
                src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"
                alt="Buy Me a Coffee"
              />
            </a>
          </div>
        </aside>
        <main id="map" aria-label="Map">
          <div class="map-controls" role="group" aria-label="Layer controls">
            <h2>Layer Controls</h2>
            <div class="layer-controls">
              <div class="layer-group">
                <h3>Basemaps</h3>
                <label><input type="radio" name="basemap" value="Esri World Terrain" checked /> Esri World Terrain</label>
                <label><input type="radio" name="basemap" value="Esri World Topo" /> Esri World Topo</label>
                <label><input type="radio" name="basemap" value="Esri World Imagery" /> Esri World Imagery</label>
                <label><input type="radio" name="basemap" value="OpenStreetMap" /> OpenStreetMap</label>
              </div>
              <div class="layer-group">
                <h3>Labels</h3>
                <label><input type="checkbox" id="showSpeciesLabels" checked /> Show Species Names</label>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="https://unpkg.com/topojson-client@3.1.0/dist/topojson-client.min.js"></script>
    <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
    <script src="https://unpkg.com/osmtogeojson@3.0.0/osmtogeojson.js"></script>
    <script src="app.js"></script>
  </body>
</html>
